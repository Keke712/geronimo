using Gtk 4.0;
using AstalWp 0.1;

template $OnScreenDisplay: Window {
    styles [
        "OnScreenDisplay_Window"
    ]

    // Revealer {
    //     transition-duration: 300;
    //     transition-type: crossfade;
    //     reveal-child: bind template.visible;
    Stack { // Stack for volume and brightness
        Box volume_osd { // Abstract this to a component... If needed(3 or more osds)
            orientation: horizontal;
            spacing: 10;
            hexpand: true;

            styles [
                "OnScreenDisplay"
            ]

            Image {
                icon-name: bind template.speaker as <AstalWp.Endpoint>.volume-icon;
            }

            Scale {
                hexpand: true;
                orientation: horizontal;
                inverted: false;

                adjustment: Adjustment vol_adjust {
                    lower: 0;
                    upper: 1;
                };

                styles [
                    "morghulis_vertical_slider"
                ]
            }

            Label {
                label: bind $current_volume(template.speaker as <AstalWp.Endpoint>.volume) as <string>;
                width-request: 50;
            }
        }
    }

    // }
}
